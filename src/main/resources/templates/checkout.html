<!DOCTYPE html>
<html lang="ar" dir="rtl" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <title>إتمام الدفع</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet">

    <!-- Icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/header.css}">
    <link rel="stylesheet" th:href="@{/css/checkout.css}">
</head>
<body>

<!-- =============================== HEADER =============================== -->
<header class="app-header">
    <div class="container d-flex justify-content-between align-items-center">

        <h3 class="m-0 text-white">
            <img th:src="@{/img/logo.png}" alt="logo" class="logo-img">
        </h3>

        <nav class="d-flex align-items-center">

            <a th:href="@{/home}" class="text-white mx-2 text-decoration-none">الرئيسية</a>
            <a th:href="@{/services}" class="text-white mx-2 text-decoration-none">الخدمات</a>
            <a th:href="@{/orders/create}" class="text-white mx-2 text-decoration-none">إنشاء طلب</a>
            <a th:href="@{/cart}" class="text-white mx-2 text-decoration-none">
                <i class="fa fa-shopping-cart"></i> السلة
            </a>

            <!-- زر تسجيل الدخول -->
            <a id="loginBtn" th:href="@{/login}" class="btn btn-light btn-sm mx-2">تسجيل الدخول</a>

            <!-- صورة البروفايل -->
            <img id="profileAvatar"
                 src="https://cdn-icons-png.flaticon.com/512/3177/3177440.png"
                 style="display:none; cursor:pointer; border-radius:50%; width:40px; height:40px;"
                 onclick="window.location.href='/profile'">
        </nav>

    </div>
</header>

<!-- =============================== MAIN =============================== -->
<main class="checkout-wrapper">

    <div class="glass-card checkout-container">
        <!-- العمود الأيسر: بيانات العميل -->
        <div class="checkout-section">
            <h3 class="section-title">
                <i class="fa fa-user"></i> بيانات العميل
            </h3>
            <p class="section-subtitle">الرجاء تعبئة البيانات بدقة لإتمام الطلب.</p>

            <div class="mb-3">
                <label class="form-label">الاسم الكامل</label>
                <input type="text" id="fullName" class="form-control modern-input" placeholder="اكتب اسمك هنا">
            </div>

            <div class="mb-3">
                <label class="form-label">المدينة</label>
                <input type="text" id="city" class="form-control modern-input" placeholder="مثل: مكة - جدة - الرياض">
            </div>

            <div class="mb-3">
                <label class="form-label">العنوان التفصيلي</label>
                <textarea id="address" class="form-control modern-input" rows="3"
                          placeholder="الحي، الشارع، رقم المبنى..."></textarea>
            </div>
        </div>

        <!-- العمود الأوسط: ملخص السلة -->
        <div class="checkout-section">
            <h3 class="section-title">
                <i class="fa fa-basket-shopping"></i> ملخص الطلب
            </h3>
            <p class="section-subtitle">الخدمات التي قمت باختيارها من السلة.</p>

            <div id="cartItemsContainer" class="cart-items-list">
                <!-- العناصر تضاف بالـ JS -->
            </div>

            <div class="checkout-total">
                <span>الإجمالي:</span>
                <span id="cartTotal">0 ريال</span>
            </div>
        </div>

        <!-- العمود الأيمن: طريقة الدفع وتأكيد -->
        <div class="checkout-section">
            <h3 class="section-title">
                <i class="fa fa-credit-card"></i> طريقة الدفع
            </h3>

            <div class="payment-methods">

                <label class="payment-option">
                    <input type="radio" name="payMethod" value="CASH" checked>
                    <div class="payment-option-card">
                        <i class="fa fa-money-bill-wave"></i>
                        <div>
                            <strong>الدفع نقداً عند الاستلام</strong>
                            <p>ادفع عند استلام الملابس من المندوب.</p>
                        </div>
                    </div>
                </label>

                <label class="payment-option">
                    <input type="radio" name="payMethod" value="CARD">
                    <div class="payment-option-card">
                        <i class="fa fa-credit-card"></i>
                        <div>
                            <strong>بطاقة مدى / فيزا</strong>
                            <p>خدمة وهمية للتجربة (لن يتم خصم حقيقي).</p>
                        </div>
                    </div>
                </label>

                <label class="payment-option">
                    <input type="radio" name="payMethod" value="ONLINE">
                    <div class="payment-option-card">
                        <i class="fa fa-globe"></i>
                        <div>
                            <strong>دفع إلكتروني</strong>
                            <p>بوابة دفع تجريبية للمشروع الجامعي.</p>
                        </div>
                    </div>
                </label>
            </div>

            <button class="btn btn-confirm w-100 mt-4" onclick="confirmOrder()">
                <i class="fa fa-check-circle"></i> تأكيد الطلب والدفع
            </button>

            <button class="btn btn-outline-light w-100 mt-2" onclick="window.location.href='/services'">
                العودة لاختيار خدمات أخرى
            </button>
        </div>
    </div>

</main>

<!-- =============================== FOOTER =============================== -->
<footer class="app-footer text-center py-3 mt-4">
    <p class="text-white-50">© 2025 نظام المغاسل الذكي - جميع الحقوق محفوظة</p>
</footer>

<!-- =============================== JS =============================== -->
<script th:src="@{/js/checkout.js}"></script>

</body>
</html>
